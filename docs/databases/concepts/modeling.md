## Моделювання

### Нормалізація баз даних

**Нормалізація баз даних** - це процес поділу таблиці на дрібніші, пов'язані таблиці для уникнення надмірності даних та забезпечення узгодженості та цілісності бази даних.

Нормалізація дозволяє розділити таблиці таким чином, що кожна таблиця містить лише ті атрибути, які взаємодіють з однією конкретною сутністю. Це виконується за допомогою розподілу таблиць та визначення зв'язків між ними.

**Денормалізація баз даних** - це процес об'єднання даних із кількох таблиць в одну або кілька денормалізованих таблиць для оптимізації продуктивності та спрощення запитів.

Денормалізації включає

- Зменшення числа з'єднань таблиць, щоб покращити продуктивність під час виконання запитів.
- Дублювання даних для спрощення та прискорення вилучення даних.
- Використання агрегованих стовпців для попереднього обчислення агрегатних функцій.

Нормальні форми в базах даних визначають, наскільки добре структуровані таблиці бази даних щодо уникнення дублювання даних та забезпечення консистентності. Існують кілька рівнів нормальних форм, кожен з яких вказує на певний ступінь оптимізації та структурованості бази даних.

Існують такі рівні нормалізації: перша нормальна форма (1НФ), 2НФ, 3НФ, нормальна форма Бойса-Кодда (БКНФ), 4НФ, 5НФ. Але дотепер жодна з реляційних СКБД не надає належної підтримки усім п'яти нормальним формам. Це відбувається через жорсткі вимоги до продуктивності. Суть справи полягає в тому, що в повністю нормалізованій БД для виконання запиту треба з'єднати настільки багато таблиць, що продуктивність такої системи не зможе задовольнити користувачів. Тому на практиці використовують лише перші три рівня нормалізації – 1НФ, 2НФ, ЗНФ.

Види нормальних форм

- Перша нормальна форма (1NF) утворює ґрунт для структурованої схеми бази даних
    - Кожна таблиця повинна мати первинний ключ: мінімальний набір колонок, які ідентифікують запис.
    - Відсутні групи атрибутів з однаковими за змістом значеннями, які повторюються у межах одного кортежу.
    - Атомарність - кожен атрибут повинен мати лише одне значення, а не множину значень. Наприклад, якщо у атрибуті «Прізвище, ім'я, по батькові» міститься прізвище, ім'я та по батькові читача, вимога неподільності не виконується
- Друга нормальна форма (2NF)
    - Таблиця повинна бути у 1NF
    - Всі неключові стовпці повинні повністю залежати від первинного ключа.
- Третя нормальна форма (3NF)
    - Таблиця повинна бути у 2NF
    - Усуває транзитивні залежності, тобто кожен неключовий атрибут повинен прямо залежати від первинного ключа, а не від інших неключових атрибутів. Це ще більше зменшує надмірність і підвищує цілісність.

Переваги нормалізації

- Зменшення надмірності даних та забезпечення цілісності бази даних.
- Поліпшення продуктивності під час оновлення даних.
- Спрощення структури бази даних, що робить її легшою для розуміння та підтримки.

Недоліки нормалізації

- Збільшення складності при вилученні даних із кількох пов'язаних таблиць.
- Збільшення числа з'єднань таблиць при виконанні складних запитів, що може негативно позначитися на продуктивності.

*Links*

- https://youtu.be/0kq99Y8m0gw?si=PY9bqnrF4ReGHDbv

### Партиціювання та шардування

Партиціювання та шардування - це техніки, які дозволяють розбити велику базу даних на менші частини, щоб забезпечити більшу масштабованість та продуктивність.

**Партиціювання (Partitioning)** - це процес розділення таблиці так, що її дані розділяються на менші, більш керовані та ефективно оброблювані частини, які називаються "партиціями". Кожна партиція може бути розміщена на окремому диску або файловій системі, що дозволяє базі даних обробляти запити швидше, оскільки кожна партиція може бути оброблена незалежно від інших, отже обробляється менше даних. Також, можна створювати індекси на окремих партиціях, що полегшує оптимізацію запитів.

Партиціювання включає в себе наступні кроки

- Визначення критеріїв партиціювання: це може бути дата, час, ідентифікатор або будь-який інший атрибут, що дозволяє логічно розділити дані.
- Створення партицій: кожна партиція створюється відповідно до визначених критеріїв.
- Розподіл даних: дані переносяться в відповідні партиції.

**Шардування (Sharding)** - це процес розділення таблиці на менші фрагменти - шарди, які можуть бути збережені на різних серверах. Однак, на відміну від партиціювання, шардування зазвичай використовується для розділення даних на різних серверах у різних локаціях. Це дозволяє збільшити доступність та надійність бази даних, оскільки в разі відмови одного сервера, інші сервери можуть продовжувати працювати.

Шардування буває вертикальне і горизонтальне

- Горизонтальне шардування відбувається, коли рядки даних розподіляються між різними базами даних (шардами). Кожен шард містить унікальний набір рядків. Наприклад, один шард може містити дані про користувачів з іменами, що починаються на літери A-M, а інший шард - про користувачів з іменами на N-Z.
- Вертикальне шардування відбувається, коли стовпці даних розподіляються між різними базами даних. Кожен шард містить унікальний набір стовпців. Наприклад, один шард може містити контактну інформацію користувача, а інший - інформацію про замовлення цього користувача.

### Master-Slave

Архітектура **Master-Slave** (тепер часто називається **Primary-Replica**, щоб уникнути застарілих термінів) використовується для горизонтального масштабування баз даних і забезпечення високої доступності. У цій моделі одна база даних виступає як Master, а інші як Slave. Використовується для підвищення продуктивності, коли операції читання значно переважають операції запису, або для забезпечення резервування даних. Ця архітектура є популярною для додатків із високими вимогами до масштабованості з великою кількістю запитів на читання.

**Master (Primary)**  - основна база даних, яка приймає всі операції запису. Зміни, внесені до Master, реплікуються (передаються) до всіх Slave.

**Slave (Replica)**  - це одна або більше копій Master, які синхронізуються через реплікацію. Slave обслуговують лише операції читання, що дозволяє розподілити навантаження на систему.

Реплікація може бути синхронною (запис на Master завершується тільки після оновлення Slave) або асинхронною (Master завершує операцію запису, не чекаючи синхронізації з Slave).

Переваги

- Розвантаження Master  - операції читання перенаправляються на Slave, що зменшує навантаження на Master.
- Масштабованість  - легко додати нові Slave для обробки більшого обсягу запитів на читання.
- Резервування даних - у разі відмови Master, один із Slave може бути підвищений до Master.

Недоліки

- Затримка реплікації  - у разі асинхронної реплікації можуть виникати затримки, що призводять до читання застарілих даних зі Slave.
- Складність управління  - підтримка синхронізації між Master і Slave потребує додаткових ресурсів і інструментів.
- Відсутність автоматичного переходу на новий Master  - у разі відмови Master зазвичай потрібне ручне втручання для призначення нового Master.

### Яка різниця між OLTP та OLAP?

OLTP (Online Transactional Processing) and OLAP (Online Analytical Processing) — це два різних типи обробки даних, які використовуються в сфері інформаційних систем.

**OLTP (Online Transactional Processing)**

- Призначення: OLTP призначений для операційної обробки даних. Коли виконуються багато транзакцій в реальному часі.
- Тип операцій: OLTP обробляє прості операції вставки, оновлення та видалення даних. Наприклад, банківські транзакції, бронювання готелів, зміни паролів тощо.
- Швидкість обробки: Відповіді мають бути дуже швидкими, з відгуком в мілісекундах.

**OLAP (Online Analytical Processing)**

- Призначення: OLAP призначений для аналізу даних. Коли виконуються складні аналітичні розрахунки на великих обсягах даних.
- Тип операцій: Використовується для глибокого аналізу даних, такого як добування знань, бізнес-інтелект, прогнозування продажів тощо.
- Швидкість обробки: OLAP може працювати з великими обсягами даних, тож відповіді можуть бути повільними.
